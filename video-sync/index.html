<!DOCTYPE html>
<html>

<head>
  <title>Screenplay Video Sync</title>
  <style>
    body {
      margin: 0;
      background: black;
    }
  </style>
</head>

<body>
  <video id="video" src="/boot/screenplay.mp4"
    style="width: 100%; height: 100%; object-fit: fill;"></video>
  <script>
    // This will always point to the master machine when connected with a RJ45 / CAT5 cable.
    const ws = new WebSocket('ws://192.168.1.1:8080');
    const video = document.getElementById('video');

    ws.onmessage = (event) => {
      if (event.data === 'play') {
        video.play();
      } else if (event.data === 'restart') {
        video.currentTime = 0;
        video.play();
      }
    };

    ws.onopen = () => { ws.send('start'); };

    video.addEventListener('ended', () => {
      ws.send('restart');
      ended = true;
    });
  </script>
</body>

</html>